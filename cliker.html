<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DollarClick Heavenis</title>
<style>
/* --- BASE --- */
body {
  margin: 0;
  font-family: 'Arial', sans-serif;
  background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
  color: white;
  text-align: center;
  overflow: hidden;
}
h1 { margin: 20px 0; font-size: 2em; text-shadow: 0 0 10px #00ffcc; }
#score { font-size: 1.5em; margin-bottom: 10px; }

/* --- GAME CONTAINER --- */
#game-container {
  position: relative;
  width: 100%;
  height: 70vh;
  display: flex;
  justify-content: center;
  align-items: center;
}
.star {
  font-size: 150px;
  cursor: pointer;
  user-select: none;
  transition: transform 0.1s, text-shadow 0.2s;
  color: gold;
  text-shadow: 0 0 10px #ffd700, 0 0 20px #ffea00, 0 0 30px #ffe600;
}
.star:active {
  transform: scale(0.9);
  text-shadow: 0 0 20px #ffd700, 0 0 40px #ffea00, 0 0 60px #ffe600;
}

/* --- MENU BUTTONS --- */
.menu-button {
  position: fixed;
  right: 20px;
  background: #222;
  padding: 12px;
  border-radius: 10px;
  cursor: pointer;
  font-size: 1.5em;
  box-shadow: 0 0 10px rgba(0,255,204,0.7);
  transition: transform 0.2s, box-shadow 0.2s;
  z-index: 1000;
  width: 54px;
  height: 54px;
  display: grid;
  place-items: center;
}
.menu-button:hover {
  transform: translateY(-3px);
  box-shadow: 0 0 20px rgba(0,255,204,0.9);
}
#shop-button { top: 20px; }
#quests-button { top: 84px; }

/* --- OVERLAYS --- */
#shop-overlay, #quests-overlay {
  display: none;
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.95);
  z-index: 2000;
  color: white;
  overflow-y: auto;
  padding: 20px;
}
#shop-overlay h2, #quests-overlay h2 {
  margin-top: 0;
  font-size: 2em;
  text-align: center;
  text-shadow: 0 0 10px #00ffcc;
}
.back-btn {
  position: fixed;
  top: 20px;
  right: 20px;
  padding: 10px 18px;
  background: #00ffcc;
  color: #111;
  border-radius: 8px;
  cursor: pointer;
  font-weight: bold;
  z-index: 2100;
  transition: transform 0.2s, box-shadow 0.2s;
}
.back-btn:hover {
  transform: translateY(-3px);
  box-shadow: 0 0 20px rgba(0,255,204,0.7);
}

/* --- SHOP & QUEST ITEMS --- */
.shop-item, .quest-item {
  background: #222;
  padding: 15px 25px;
  margin: 10px;
  display: inline-block;
  border-radius: 12px;
  cursor: pointer;
  font-size: 1.2em;
  transition: transform 0.2s, box-shadow 0.2s;
}
.shop-item:hover, .quest-item:hover {
  transform: translateY(-3px);
  box-shadow: 0 0 20px rgba(0,255,204,0.7);
}
.shop-item.disabled { opacity: 0.5; cursor: not-allowed; }
.quest-section-title {
  font-weight: bold;
  text-decoration: underline;
  margin-top: 20px;
  text-align: center;
}

/* --- COINS ANIMATION --- */
.coin {
  position: absolute;
  font-size: 24px;
  animation: rise 1s forwards;
  pointer-events: none;
  user-select: none;
}
@keyframes rise {
  0% { transform: translateY(0px); opacity:1; }
  100% { transform: translateY(-100px) scale(1.2); opacity:0; }
}
</style>
</head>
<body>

<h1>DollarClick Heavenis</h1>
<div id="score">Dollard : 0</div>

<div id="game-container">
  <div class="star" id="star">‚≠ê</div>
</div>

<!-- Boutons -->
<div id="shop-button" class="menu-button" title="Magasin">üè™</div>
<div id="quests-button" class="menu-button" title="Qu√™tes">üìú</div>

<!-- Overlay Magasin -->
<div id="shop-overlay">
  <div class="back-btn" id="back-to-game">‚¨Ö Retour</div>
  <h2>Magasin d'√âtoiles</h2>
  <div id="shop-items"></div>
</div>

<!-- Overlay Qu√™tes -->
<div id="quests-overlay">
  <div class="back-btn" id="back-to-game-quests">‚¨Ö Retour</div>
  <h2>üìú Qu√™tes</h2>
  <div class="quest-section-title">Qu√™tes quotidiennes</div>
  <div id="quests-daily"></div>
  <div class="quest-section-title">Qu√™tes hebdomadaires</div>
  <div id="quests-weekly"></div>
  <div class="quest-section-title">Qu√™tes principales</div>
  <div id="quests-main"></div>
</div>

<script>
// --- INITIALISATION ---
const star = document.getElementById('star');
const scoreDisplay = document.getElementById('score');
const shopButton = document.getElementById('shop-button');
const questsButton = document.getElementById('quests-button');
const shopOverlay = document.getElementById('shop-overlay');
const questsOverlay = document.getElementById('quests-overlay');
const backBtn = document.getElementById('back-to-game');
const backBtnQuests = document.getElementById('back-to-game-quests');
const shopItems = document.getElementById('shop-items');
const questsDailyDiv = document.getElementById('quests-daily');
const questsWeeklyDiv = document.getElementById('quests-weekly');
const questsMainDiv = document.getElementById('quests-main');

let score = parseInt(localStorage.getItem('score')) || 0;
let starCount = parseInt(localStorage.getItem('starCount')) || 1;
let currentStar = localStorage.getItem('currentStar') || '‚≠ê';
let totalClicks = parseInt(localStorage.getItem('totalClicks')) || 0;

star.innerText = currentStar;
scoreDisplay.innerText = `Dollard : ${score}`;

// --- UPGRADES SHOP ---
const upgrades = [
  { name:'üíé 20', cost:20, multiplier:2, star:'üíé' },
  { name:'üîπ 50', cost:50, multiplier:3, star:'üîπ' },
  { name:'üî∂ 100', cost:100, multiplier:4, star:'üî∂' },
  { name:'üü¢ 200', cost:200, multiplier:5, star:'üü¢' },
  { name:'üü° 1000', cost:1000, multiplier:6, star:'üü°' },
  { name:'‚≠ê 500', cost:500, multiplier:7, star:'‚≠ê' },
  { name:'üåü 1500', cost:1500, multiplier:8, star:'üåü' },
  { name:'‚ú® 2200', cost:2200, multiplier:9, star:'‚ú®' },
  { name:'üí´ 2600', cost:2600, multiplier:10, star:'üí´' },
  { name:'üå† 3000', cost:3000, multiplier:12, star:'üå†' },
  { name:'üåå 4500', cost:4500, multiplier:14, star:'üåå' },
  { name:'üåô 6000', cost:6000, multiplier:16, star:'üåô' },
  { name:'‚òÑÔ∏è 10000', cost:10000, multiplier:18, star:'‚òÑÔ∏è' },
  { name:'ü™ê 15000', cost:15000, multiplier:20, star:'ü™ê' },
  { name:'üåüüåü 30000', cost:30000, multiplier:25, star:'üåüüåü' }
];

// --- CLIC √âTOILE ---
star.addEventListener('click', () => {
  score += starCount;
  totalClicks++;
  scoreDisplay.innerText = `Dollard : ${score}`;
  localStorage.setItem('score', score);
  localStorage.setItem('totalClicks', totalClicks);

  // coin animation
  const coin = document.createElement('div');
  coin.className = 'coin';
  coin.innerText = 'üí≤';
  const rect = star.getBoundingClientRect();
  coin.style.left = `${rect.left + rect.width/2 - 12}px`;
  coin.style.top = `${rect.top + rect.height/2 - 12}px`;
  document.body.appendChild(coin);
  setTimeout(()=> coin.remove(), 1000);

  updateQuestsProgress();
});

// --- NAVIGATION ---
shopButton.addEventListener('click', ()=>{ shopOverlay.style.display='block'; updateShop(); });
backBtn.addEventListener('click', ()=>{ shopOverlay.style.display='none'; });
questsButton.addEventListener('click', ()=>{ questsOverlay.style.display='block'; renderQuests(); });
backBtnQuests.addEventListener('click', ()=>{ questsOverlay.style.display='none'; });

// --- SHOP ---
function updateShop(){
  shopItems.innerHTML = '';
  upgrades.forEach(item=>{
    const div = document.createElement('div');
    div.className = 'shop-item';
    if(score < item.cost) div.classList.add('disabled');
    div.innerHTML = `${item.name}<br>Co√ªt : ${item.cost} üíµ`;
    div.onclick = ()=>{
      if(score >= item.cost){
        score -= item.cost;
        starCount = item.multiplier;
        currentStar = item.star;
        star.innerText = currentStar;
        scoreDisplay.innerText = `Dollard : ${score}`;
        localStorage.setItem('score', score);
        localStorage.setItem('starCount', starCount);
        localStorage.setItem('currentStar', currentStar);
        updateShop();
        updateQuestsProgress();
      }
    };
    shopItems.appendChild(div);
  });
}

// --- QU√äTES ---
const quests = { daily:[], weekly:[], main:[
  { text:"Atteins 100000 üíµ", type:"score", goal:100000, progress:0, reward:10000, claimed:false },
  { text:"D√©bloque üåå", type:"star", goal:"üåå", progress:false, reward:20000, claimed:false }
]};

// G√©n√©ration dynamique
for(let i=1;i<=50;i++){
  const type = i%2===0?"clicks":"score";
  const goal = type==="clicks"?Math.floor(50*Math.pow(1.2,i/5)):Math.floor(500*Math.pow(1.3,i/5));
  const reward = Math.floor(goal/2);
  quests.daily.push({ text:`Qu√™te quotidienne #${i}`, type:type, goal:goal, progress:0, reward:reward, claimed:false });
}
for(let i=1;i<=20;i++){
  const type = i%3===0?"upg":"score";
  const goal = type==="upg"?i*3:Math.floor(1000*Math.pow(1.4,i/5));
  const reward = Math.floor(goal/2);
  quests.weekly.push({ text:`Qu√™te hebdomadaire #${i}`, type:type, goal:goal, progress:0, reward:reward, claimed:false });
}

// --- RENDER QU√äTES ---
function renderQuests(){
  function renderList(list, container){
    container.innerHTML = '';
    list.forEach(q=>{
      const div = document.createElement('div');
      div.className='quest-item';
      let status = q.claimed?'‚úÖ':'‚ùå';
      div.innerHTML = `${status} ${q.text} (R√©compense: ${q.reward})`;
      container.appendChild(div);
    });
  }
  renderList(quests.daily, questsDailyDiv);
  renderList(quests.weekly, questsWeeklyDiv);
  renderList(quests.main, questsMainDiv);
}

// --- UPDATE QU√äTES ---
function updateQuestsProgress(){
  // quotidien
  quests.daily.forEach(q=>{
    if(!q.claimed){
      if(q.type==="clicks") q.progress = totalClicks;
      if(q.type==="score") q.progress = score;
      if(q.progress >= q.goal) q.claimed=true;
    }
  });
  // hebdomadaire
  quests.weekly.forEach(q=>{
    if(!q.claimed){
      if(q.type==="upg") q.progress = starCount;
      if(q.type==="score") q.progress = score;
      if(q.progress >= q.goal) q.claimed=true;
    }
  });
  // principal
  quests.main.forEach(q=>{
    if(!q.claimed){
      if(q.type==="score") q.progress = score;
      if(q.type==="star") q.progress = currentStar===q.goal;
      if(q.progress) q.claimed=true;
    }
  });
  renderQuests();
}
renderQuests();
updateShop();
</script>

</body>
</html>
